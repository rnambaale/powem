var custom_bezier=function(x1,y1,x2,y2,epsilon){var curveX=function(t){var v=1-t;return 3*v*v*t*x1+3*v*t*t*x2+t*t*t;};var curveY=function(t){var v=1-t;return 3*v*v*t*y1+3*v*t*t*y2+t*t*t;};var derivativeCurveX=function(t){var v=1-t;return 3*(2*(t-1)*t+v*v)*x1+3*(-t*t*t+2*v*t)*x2;};return function(t){var x=t,t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=curveX(t2)-x;if(Math.abs(x2)<epsilon){return curveY(t2);}
d2=derivativeCurveX(t2);if(Math.abs(d2)<1e-6){break;}
t2=t2-x2/d2;}
t0=0;t1=1;t2=x;if(t2<t0){return curveY(t0);}
if(t2>t1){return curveY(t1);}
while(t0<t1){x2=curveX(t2);if(Math.abs(x2-x)<epsilon){return curveY(t2);}
if(x>x2){t0=t2;}
else{t1=t2;}
t2=(t1-t0)*0.5+t0;}
return curveY(t2);};};var snapAnim=function(){if(document.getElementById('zapio_anim')!==null){var s=new Snap("#zapio_anim");}
function loaded(d){var small_dots_count=12;var phase1_dots_count=8;var phase2_dots_count=12;var phase1_dots=[];var phase2_dots=[];var phase1_dot_group;var phase2_dot_group;var dot_center;var pulse_repeat=3;var pulse_elements_count=3;var dot_solution=5;var duration=1400;var epsilon=(1000/60/duration)/4;var timingFunction=custom_bezier(.73,0.02,.28,0.99,epsilon);var elasticFunction=custom_bezier(.37,-1,.62,2,epsilon);function getDistancesOfCirclesWithOffset(el_from,el_to){var el_from_top=parseFloat(el_from.attr('cy')),el_from_left=parseFloat(el_from.attr('cx')),el_from_width=parseFloat(el_from.attr('r')),el_from_offset_x=parseFloat(el_from.attr('data-offset-x'))*1.5,el_from_offset_y=parseFloat(el_from.attr('data-offset-y'))*1.5,el_from_cx=el_from_left+(el_from_width/2),el_from_cy=el_from_top+(el_from_width/2),el_to_top=parseFloat(el_to.attr('cy')),el_to_left=parseFloat(el_to.attr('cx')),el_to_width=parseFloat(el_to.attr('r')),el_to_cx=el_to_left+(el_to_width/2),el_to_cy=el_to_top+(el_to_width/2),distance_x_1=el_to_cx-el_from_cx+el_from_offset_x,distance_y_1=el_to_cy-el_from_cy+el_from_offset_y,distance_x_2=distance_x_1-el_from_offset_x,distance_y_2=distance_y_1-el_from_offset_y;return[distance_x_1,distance_y_1,distance_x_2,distance_y_2];}
function getDistancesOfCircles(el_from,el_to){var el_from_top=parseFloat(el_from.attr('cy')),el_from_left=parseFloat(el_from.attr('cx')),el_from_width=parseFloat(el_from.attr('r')),el_from_cx=el_from_left+(el_from_width/2),el_from_cy=el_from_top+(el_from_width/2),el_to_top=parseFloat(el_to.attr('cy')),el_to_left=parseFloat(el_to.attr('cx')),el_to_width=parseFloat(el_to.attr('r')),el_to_cx=el_to_left+(el_to_width/2),el_to_cy=el_to_top+(el_to_width/2),distance_x_1=el_to_cx-el_from_cx,distance_y_1=el_to_cy-el_from_cy;return[distance_x_1,distance_y_1];}
var step7=function(){$('#progress_bar_mask').removeClass('phase3');$('#progress_bar_mask').addClass('phase1');$('#side_content_3').removeClass('active');$('#side_content_1').addClass('active');phase1_dot_group.transform('r(0,200,200)').attr({'display':'block'});for(i=1;i<=phase1_dots_count;i++){phase1_dots[i].transform('t0,0').attr({'fill':'#1C1C1C','display':'block'});}
pulse_repeat=3;phase1_dot_group.animate({'opacity':'1'},800,mina.linear,function(){phase2_dot_group.attr({'display':'none'});for(i=1;i<=phase2_dots_count;i++){phase2_dots[i].transform('t0,0s1').attr({'fill':'#D0D0D0','opacity':'1'});}
step1(kickoff=false);});}
var step6=function(){$('#progress_bar_mask').removeClass('phase2');$('#progress_bar_mask').addClass('phase3');$('#side_content_2').removeClass('active');$('#side_content_3').addClass('active');for(i=1;i<=phase2_dots_count;i++){if(i===dot_solution){phase2_dots[i].animate({'fill':'#82378C'},1000,mina.linear);phase2_dots[i].animate({'transform':'t0,-120s4'},2000,mina.easeinout,function(){this.animate({'transform':'t0,-110s4'},1500,mina.easeinout,function(){this.animate({'transform':'t0,-120s4'},1500,mina.easeinout,function(){this.animate({'transform':'t0,-110s4'},1500,mina.easeinout,function(){this.animate({'transform':'t0,-120s4'},1500,mina.easeinout,function(){this.animate({'transform':'t0,-100s4','opacity':'0'},1500,mina.easeinout,function(){step7();});});});});});});}
else{phase2_dots[i].animate({'opacity':'0'},1200,elasticFunction);phase2_dots[i].animate({'transform':'t0,40'},1600,elasticFunction);}}}
var doSetTimeoutStep5=function(i){$('#progress_bar_mask').removeClass('phase1');$('#progress_bar_mask').addClass('phase2');$('#side_content_1').removeClass('active');$('#side_content_2').addClass('active');var step5Timeout=setTimeout(function(){$('#pulse_'+i).css('visibility','visible');$('#pulse_'+i).addClass('end').removeClass('start');if(i===pulse_elements_count){pulse_repeat--;if(pulse_repeat>0){var step5Timeout2=setTimeout(function(){step5();},1800);}
else{step6();}}},i*350);}
var step5=function(){for(i=1;i<=pulse_elements_count;i++){$('#pulse_'+i).css('visibility','hidden');$('#pulse_'+i).removeClass('end').addClass('start');doSetTimeoutStep5(i);}}
var step4=function(){for(i=1;i<=phase2_dots_count;i++){phase2_dots[i].attr({'display':'block'});phase2_dots[i].animate({'transform':'t0,0'},400,timingFunction,function(){if(this.attr('id')==='phase2_dot_12'){step5();}});}}
var step3=function(){for(i=1;i<=phase2_dots_count;i++){var el_from=phase2_dots[i];var el_to=dot_center;var distances=getDistancesOfCircles(el_from,el_to),distance_x=distances[0],distance_y=distances[1];phase2_dots[i].transform('t'+distance_x+','+distance_y);if(i!==12){phase2_dots[i].attr({'display':'none'});}}
phase2_dot_group.attr({'display':'block'});phase1_dot_group.attr({'display':'none','opacity':'0'});phase2_dot_group.animate({'transform':'s3.5,200,200'},800,mina.timingFunction,function(){phase2_dot_group.animate({'transform':'s1,200,200'},300,mina.easeinout,function(){step4();});});}
var step2=function(id,distances){var distance_x_1=distances[0],distance_y_1=distances[1],distance_x_2=distances[2],distance_y_2=distances[3];phase1_dots[id].animate({'fill':'#D0D0D0'},1000,timingFunction);phase1_dots[id].animate({'transform':'t'+distance_x_1+','+distance_y_1},800,timingFunction,function(){var that=this;var step2Timeout=setTimeout(function(){that.animate({'transform':'t'+distance_x_2+','+distance_y_2},600,elasticFunction,function(){if(that.attr('id')==='dot_8'){var step3Timeout=setTimeout(function(){step3();},500);}
else{that.attr({'display':'none'});}});},1400-(id*150));});}
var doSetTimeoutStep2=function(i,distances){var animTimeout=setTimeout(function(){step2(i,distances);},i*160+2050);}
var step1=function(kickoff){if(kickoff===true){phase1_dot_group.animate({'opacity':'1'},800,mina.linear,function(){phase1_dot_group.animate({'transform':'r(1080,200,200)'},5000,mina.easeout);for(i=1;i<=phase1_dots_count;i++){var el_from=phase1_dots[i];var el_to=dot_center;var distances=getDistancesOfCirclesWithOffset(el_from,el_to);doSetTimeoutStep2(i,distances);}});}
else{phase1_dot_group.animate({'transform':'r(1080,200,200)'},5000,mina.easeout);for(i=1;i<=phase1_dots_count;i++){var el_from=phase1_dots[i];var el_to=dot_center;var distances=getDistancesOfCirclesWithOffset(el_from,el_to);doSetTimeoutStep2(i,distances);}}}
for(i=1;i<=small_dots_count;i++){phase1_dots[i]=d.select('#dot_'+i);phase2_dots[i]=d.select('#phase2_dot_'+i);}
phase1_dot_group=d.select('#dots');phase2_dot_group=d.select('#phase2_dots');dot_center=d.select('#dot_center');step1(kickoff=true);s.append(d);}
if(document.getElementById('zapio_anim')!==null){Snap.load("/assets/images/anim_dots.svg",loaded);}};function viewport(){var e=window,a='inner';if(!('innerWidth'in window)){a='client';e=document.documentElement||document.body;}
return{width:e[a+'Width'],height:e[a+'Height']};}
var snapAnimTrigger=function(){var triggerElement=$('#anim_container').offset().top,vph=viewport().height,trigger=triggerElement-(vph/3*2);if($(window).scrollTop()>trigger){snapAnim();$(window).off('scroll');}}
$(window).on('scroll',function(){snapAnimTrigger();});function scrollToAnchor(aid){var element=$(aid);$('html,body').stop().animate({scrollTop:element.offset().top},600);if(aid==='#newsletter-section'){document.getElementById('mce-EMAIL').focus();}}
$('a[href^="#"]:not([href="#"])').on('click',function(event){event.preventDefault();var aid=$(this).attr('href');scrollToAnchor(aid);});$(document).ready(function(){var $form=$('#mc-embedded-subscribe-form');if($form.length>0){$('form input[type="submit"]').bind('click',function(event){if(event)event.preventDefault();register($form);});}});function register($form){$('#mce-error-response').css('display','none');$('#mce-success-response').css('display','none');var loaderWidth=$('#mc-embedded-subscribe').css('width');$('.ajax-loader').css({'display':'block','width':loaderWidth});$.ajax({type:$form.attr('method'),url:$form.attr('action'),data:$form.serialize(),cache:false,dataType:'json',contentType:"application/json; charset=utf-8",error:function(err){$('#mce-error-response').css('display','block').html("Could not connect to the registration server. Please try again later.");$('.ajax-loader').css('display','none');},success:function(data){$('.ajax-loader').css('display','none');if(data.result!="success"){$('#mce-error-response').css('display','block').html(data.msg);}else{$('#mce-success-response').css('display','block').html("Almost finished. We need to confirm your email address to complete your subscription. Just click the link in the email we just sent you.");}}});}